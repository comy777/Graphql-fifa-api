"use strict";(self["webpackChunkfifa_app_player"]=self["webpackChunkfifa_app_player"]||[]).push([[30],{30:function(e,n,a){a.r(n),a.d(n,{default:function(){return E}});var t=a(252),s=a(963),r=a(577),i={class:"container mt-5"},l=(0,t._)("h1",null,"Search",-1),o={class:"mb-4"},c=(0,t._)("label",{for:"",class:"form-label"},"Search",-1),u={class:"form-check"},p=(0,t._)("label",{class:"form-check-label"},"Team",-1),h={class:"form-check"},m=(0,t._)("label",{class:"form-check-label"},"Player",-1),d={key:0,class:"mt-2 mb-2"},g={key:1,class:"mt-2 mb-2"},f=(0,t._)("button",{class:"btn btn-primary"},"Search",-1),y={key:0},v={key:1,class:"mt-5"},k=(0,t._)("h2",null,"Resultados",-1),P=(0,t._)("br",null,null,-1),_=(0,t._)("br",null,null,-1),b=(0,t._)("br",null,null,-1),w={class:"row"},T={class:"card cardPlayer mt-2"},S={class:"card-body"},I={class:"card-title btn btn-primary"},$={class:"card-text"},z={class:"card-text"},D={class:"card-text"},U={class:"d-flex justify-content-center mt-4"},q=(0,t._)("p",{class:"me-1"},"Page",-1),x=["onClick"];function C(e,n,a,C,G,M){var J=this;return(0,t.wg)(),(0,t.iD)("div",i,[l,(0,t._)("form",{onSubmit:n[3]||(n[3]=(0,s.iM)((function(n){return e.handleSearch()}),["prevent"]))},[(0,t._)("div",o,[c,(0,t.wy)((0,t._)("input",{type:"text","onUpdate:modelValue":n[0]||(n[0]=function(e){return J.search=e}),class:"form-control"},null,512),[[s.nr,this.search]])]),(0,t._)("div",u,[(0,t.wy)((0,t._)("input",{type:"radio",value:"team","onUpdate:modelValue":n[1]||(n[1]=function(n){return e.picked=n}),class:"form-check-input"},null,512),[[s.G2,e.picked]]),p]),(0,t._)("div",h,[(0,t.wy)((0,t._)("input",{type:"radio",value:"player","onUpdate:modelValue":n[2]||(n[2]=function(n){return e.picked=n}),class:"form-check-input"},null,512),[[s.G2,e.picked]]),m]),e.errorTeam||e.errorPlayer?((0,t.wg)(),(0,t.iD)("div",d,[(0,t._)("p",null,(0,r.zw)(this.errorMessage),1)])):(0,t.kq)("",!0),this.errorSearch?((0,t.wg)(),(0,t.iD)("div",g,[(0,t._)("p",null,(0,r.zw)(this.errorMsg),1)])):(0,t.kq)("",!0),f],32),e.loadingTeam?((0,t.wg)(),(0,t.iD)("div",y,"Buscando...")):(0,t.kq)("",!0),this.resp?((0,t.wg)(),(0,t.iD)("div",v,[k,(0,t._)("p",null,[(0,t.Uk)(" Total pages: "+(0,r.zw)(this.response.totalPages)+" ",1),P,(0,t.Uk)(" Page: "+(0,r.zw)(this.response.page)+" ",1),_,(0,t.Uk)(" Total Items: "+(0,r.zw)(this.response.items)+" ",1),b,(0,t.Uk)(" Items: "+(0,r.zw)(this.response.totalItems),1)]),(0,t._)("div",null,[(0,t._)("div",w,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(this.response.players,(function(e,n){return(0,t.wg)(),(0,t.iD)("div",{class:"col-sm-6",key:n},[(0,t._)("div",T,[(0,t._)("div",S,[(0,t._)("h5",I,(0,r.zw)(e.name),1),(0,t._)("div",null,[(0,t._)("p",$,"Equipo: "+(0,r.zw)(e.club),1),(0,t._)("p",z,"Posicion: "+(0,r.zw)(e.position),1),(0,t._)("p",D,"Pais: "+(0,r.zw)(e.nation),1)])])])])})),128))])]),(0,t._)("div",U,[q,((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e.page,(function(n,a){return(0,t.wg)(),(0,t.iD)("p",{key:a,onClick:function(a){return e.handleSearchPage(n)},class:"pageClass me-2"},(0,r.zw)(n),9,x)})),128))])])):(0,t.kq)("",!0)])}var G,M,J,V=a(655),H=a(670),K=a(283),L=((0,K.Ps)(G||(G=(0,V.cy)(["\n  mutation login($input: LoginInput) {\n    login(input: $input) {\n      token\n    }\n  }\n"],["\n  mutation login($input: LoginInput) {\n    login(input: $input) {\n      token\n    }\n  }\n"]))),(0,K.Ps)(M||(M=(0,V.cy)(["\n  mutation searchPlayer($input: PlayerInput) {\n    searchPlayer(input: $input) {\n      items\n      page\n      players {\n        club\n        name\n        position\n        nation\n      }\n      totalItems\n      totalPages\n    }\n  }\n"],["\n  mutation searchPlayer($input: PlayerInput) {\n    searchPlayer(input: $input) {\n      items\n      page\n      players {\n        club\n        name\n        position\n        nation\n      }\n      totalItems\n      totalPages\n    }\n  }\n"])))),Y=(0,K.Ps)(J||(J=(0,V.cy)(["\n  mutation searchTeam($input: TeamInput) {\n    searchTeam(input: $input) {\n      totalItems\n      totalPages\n      page\n      items\n      players {\n        club\n        nation\n        position\n        name\n      }\n    }\n  }\n"],["\n  mutation searchTeam($input: TeamInput) {\n    searchTeam(input: $input) {\n      totalItems\n      totalPages\n      page\n      items\n      players {\n        club\n        nation\n        position\n        name\n      }\n    }\n  }\n"]))),Z=(0,t.aZ)({name:"search-component",setup:function(){var e=(0,H.Db)(Y),n=e.mutate,a=e.loading,t=e.error,s=(0,H.Db)(L),r=s.mutate,i=s.loading,l=s.error;return{searchTeam:n,loadingTeam:a,errorTeam:t,searchPlayer:r,loadingPlayer:i,errorPlayer:l}},data:function(){return{search:"",response:{},resp:!1,picked:"",errorMessage:"No hay coincidencias",page:[],activePage:"",errorSearch:!1,errorMsg:"Todos los campos son obligatorios"}},methods:{handleSearch:function(){return(0,V.mG)(this,void 0,void 0,(function(){return(0,V.Jh)(this,(function(e){return this.errorSearch&&(this.errorSearch=!1),this.search&&this.picked?(this.resp&&(this.resp=!1,this.page=[]),this.validate(this.picked),[2]):(this.errorSearch=!0,[2])}))}))},validate:function(e){return(0,V.mG)(this,void 0,void 0,(function(){var n,a,t,s,r;return(0,V.Jh)(this,(function(i){switch(i.label){case 0:return"team"!==e?[3,2]:[4,this.searchTeam({input:{name:this.search}})];case 1:return a=i.sent(),a?a.data?(this.resp=!0,this.response=a.data.searchTeam,n=this.response,s=n.totalPages,r=n.page,this.pages(s,r),[3,4]):[2]:[2];case 2:return[4,this.searchPlayer({input:{search:this.search}})];case 3:if(a=i.sent(),!a)return[2];if(!a.data)return[2];this.resp=!0,this.response=a.data.searchPlayer,t=this.response,s=t.totalPages,r=t.page,this.pages(s,r),i.label=4;case 4:return[2]}}))}))},handleSearchPage:function(e){return(0,V.mG)(this,void 0,void 0,(function(){var n,a;return(0,V.Jh)(this,(function(t){switch(t.label){case 0:return this.activePage=e,"team"!==this.picked?[3,2]:(n=parseInt(e),[4,this.searchTeam({input:{name:this.search,page:n}})]);case 1:return a=t.sent(),a?a.data?(this.response=a.data.searchTeam,[3,4]):[2]:[2];case 2:return n=parseInt(e),[4,this.searchPlayer({input:{search:this.search,page:n}})];case 3:if(a=t.sent(),!a)return[2];if(!a.data)return[2];this.response=a.data.searchPlayer,t.label=4;case 4:return[2]}}))}))},pages:function(e,n){if(this.activePage=n.toString(),1!==e)for(var a=0;a<e;a++){var t=a+1;this.page[a]=t.toString()}else this.page[0]=e.toString()}}}),j=a(744);const B=(0,j.Z)(Z,[["render",C]]);var E=B}}]);
//# sourceMappingURL=30.a78e0b2b.js.map